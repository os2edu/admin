"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[237],{68265:function(ne,U,a){a.r(U),a.d(U,{default:function(){return W}});var b=a(29102),n=a(85893),k=[{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u59D3\u540D",dataIndex:"index",align:"center",width:80},{title:"\u51FA\u52E4\u6B21\u6570",dataIndex:"index",align:"center",width:80},{title:"\u4E0A\u8BFE\u65F6\u957F",dataIndex:"index",align:"center",width:80},{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80}],I=function(){return(0,n.jsx)(b.QVr,{search:!1,columns:k})},F=a(11281),_=a.n(F),V=a(12741),d=a.n(V),A=a(12812),m=a.n(A),G=a(97983),v=a.n(G),z=a(40794),y=a.n(z),N=a(64129),T=a.n(N),O=a(63154),S=a(30028),Q=a(30381),C=a.n(Q);function Z(){return E.apply(this,arguments)}function E(){return E=y()(v()().mark(function g(){return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,S.request)("/seller/api/courses",{params:{"clientId.in":385}}).then(function(s){return s.map(function(u){return{label:u.title,value:u.roomId}}).filter(function(u,o,h){return h.findIndex(function(l){return l.value===u.value})===o})}));case 1:case"end":return f.stop()}},g)})),E.apply(this,arguments)}function J(g){return j.apply(this,arguments)}function j(){return j=y()(v()().mark(function g(p){var f;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=_()(_()({clientId:385},p),{},{startTime:+C()(p.startTime).startOf("day"),endTime:+C()(p.endTime).endOf("day")}),u.abrupt("return",(0,S.request)("/analysis/api/room-timesget/getClientTimeByClientId",{params:f}));case 2:case"end":return u.stop()}},g)})),j.apply(this,arguments)}function X(g){return D.apply(this,arguments)}function D(){return D=y()(v()().mark(function g(p){return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,S.request)("/analysis/api/studentRoomTimeDetailStatistics",{params:_()({clientId:385},p)}).then(function(u){var o=u.dayDetail.map(function(h){return _()(_()({},h),{},{times:h.info.length,duration:h.info.map(function(l){return l.timeLong}).reduce(function(l,w){return l+w},0)},Object.fromEntries(h.info.map(function(l){return[l.sumDay,l.timeLong]})))}).filter(function(h){return h.duration});return _()(_()({},u),{},{data:[].concat(T()((0,O.we)(o)),T()(o.length>0?[_()({index:o.length+1,name:"\u65F6\u957F\u7EDF\u8BA1"},u.daySum)]:[])).map(function(h,l,w){return _()(_()({},h),{},{dataLength:w.length})}),success:!0})}));case 1:case"end":return s.stop()}},g)})),D.apply(this,arguments)}var re=a(13714),Y=a(96486),K=a(67294),M=!1,R=[],P=function(p,f){var s=p.dataLength;return s-1===f?{colSpan:0}:{}},q=function(p,f,s){return f.dataLength-1===s?(0,n.jsx)("strong",{children:p}):p},$=function(p){var f;return[{title:"\u89D2\u8272",dataIndex:"role",hideInTable:!0,search:!0,valueType:"select",fieldProps:{options:[{label:"\u8001\u5E08",value:"teacher"},{label:"\u5B66\u751F",value:"student"},{label:"\u52A9\u6559",value:"ta"}]}},{title:"\u6559\u5BA4",dataIndex:"roomId",hideInTable:!0,search:!0,valueType:"select",request:Z},{title:"\u5B66\u751F\u6570",dataIndex:"minStudent",hideInTable:!0,search:!0},{title:"\u5F53\u65E5\u8BFE\u7A0B\u65F6\u957F",dataIndex:"minRoomTime",hideInTable:!0,search:!0,initialValue:15*60,valueType:"select",request:function(){var s=y()(v()().mark(function o(){return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:"\u5927\u4E8E15\u5206\u949F",value:900},{label:"\u5927\u4E8E30\u5206\u949F",value:1800},{label:"\u5927\u4E8E45\u5206\u949F",value:2700},{label:"\u5927\u4E8E60\u5206\u949F",value:3600}]);case 1:case"end":return l.stop()}},o)}));function u(){return s.apply(this,arguments)}return u}()},(f={title:"\u7528\u6237\u4E0A\u8BFE\u65F6\u957F",dataIndex:"minUserTime",hideInTable:!0,search:!0,valueType:"select"},m()(f,"search",{transform:function(u){return{minTeacherTime:u,minStudentTime:u}}}),m()(f,"request",function(){var s=y()(v()().mark(function o(){return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:"\u5927\u4E8E15\u5206\u949F",value:900},{label:"\u5927\u4E8E30\u5206\u949F",value:1800},{label:"\u5927\u4E8E45\u5206\u949F",value:2700},{label:"\u5927\u4E8E60\u5206\u949F",value:3600}]);case 1:case"end":return l.stop()}},o)}));function u(){return s.apply(this,arguments)}return u}()),f),m()({title:"\u65F6\u95F4",dataIndex:"timeRange",hideInTable:!0,search:!0,valueType:"dateRange",colSize:2,initialValue:[C()().add(-1,"d"),C()().add(-1,"d")],fieldProps:{allowClear:!1}},"search",{transform:function(u){var o=d()(u,2),h=o[0],l=o[1];return{startTime:h,endTime:l}}}),{title:"\u5E8F\u53F7",dataIndex:"index",valueType:"index",align:"center",width:80,onCell:P},{title:"\u59D3\u540D",dataIndex:"name",align:"center",width:80,onCell:function(u,o){var h=u.dataLength;if(h-1===o)return{colSpan:4}}},{title:"\u51FA\u52E4\u6B21\u6570",dataIndex:"times",align:"center",width:80,defaultSortOrder:"descend",sorter:{compare:function(u,o){return u.times-o.times}},onCell:P},{title:"\u4E0A\u8BFE\u65F6\u957F",dataIndex:"duration",align:"center",width:80,renderText:O.V4,onCell:P}].concat(T()(p.map(function(s){return{title:s[0],dataIndex:s[0],width:100,renderText:O.V4}}))).map(function(s){return _()(_()({search:!1},s),{},{render:q})})},ee=function(){var g=(0,K.useState)({}),p=d()(g,2),f=p[0],s=p[1],u=(0,K.useState)([]),o=d()(u,2),h=o[0],l=o[1],w=$(h),x=w.map(function(t){return t.width}).reduce(function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t+r});return(0,n.jsx)(b.QVr,{bordered:!0,rowKey:"index",columns:w,search:{labelWidth:100},request:function(){var t=y()(v()().mark(function r(i){return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!M){c.next=3;break}return M=!1,c.abrupt("return",R);case 3:return J(i).then(function(H){return l(Object.entries(H))}),c.next=6,X(i);case 6:return R=c.sent,c.abrupt("return",R);case 8:case"end":return c.stop()}},r)}));return function(r){return t.apply(this,arguments)}}(),headerTitle:(0,n.jsx)("span",{style:{color:"#1890ff"},children:"\u65F6\u957F\u7EDF\u8BA1 79\u5C0F\u65F610\u52069\u79D2"}),pagination:!1,defaultSize:"small",scroll:{x:"calc(".concat(x,"px + 50%)")},onChange:function(r,i,e){(0,Y.isEmpty)(e)||(M=!0)}})},B=function(){return(0,n.jsx)(b.QVr,{})},te=function(){return(0,n.jsx)(b.QVr,{})},W=function(){return(0,n.jsx)(b._zJ,{tabList:[{tab:"\u7EFC\u5408\u6570\u636E\u7EDF\u8BA1",key:"ComprehensiveStatistics",children:(0,n.jsx)(ee,{})},{tab:"\u6559\u5BA4\u8BFE\u65F6\u7EDF\u8BA1",key:"ClassroomClassHourStatistics",children:(0,n.jsx)(I,{})},{tab:"\u6559\u5E08\u8BFE\u65F6\u7EDF\u8BA1",key:"TeacherClassHourStatistics",children:(0,n.jsx)(te,{})},{tab:"\u5B66\u751F\u8BFE\u65F6\u7EDF\u8BA1",key:"StudentClassHourStatistics",children:(0,n.jsx)(B,{})}]})}},13714:function(ne,U,a){a.d(U,{$H:function(){return w},EP:function(){return X},Gr:function(){return J},Hf:function(){return te},No:function(){return f},P6:function(){return ee},Rq:function(){return R},Zy:function(){return O},_I:function(){return h},fZ:function(){return Q},hS:function(){return Z},qY:function(){return K},qm:function(){return g},se:function(){return u},so:function(){return q},wA:function(){return N}});var b=a(97983),n=a.n(b),k=a(11281),I=a.n(k),F=a(97548),_=a.n(F),V=a(40794),d=a.n(V),A=a(63154),m=a(30028),G=a(27484),v=a.n(G),z=["classroomStatus"],y=["coverUrl"];function N(t){return T.apply(this,arguments)}function T(){return T=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385",{params:I()(I()({},r),{},{isDelete:1})}).then(function(c){return{data:(0,A.we)(c.courseList,r),total:c.totalNum,success:!0}}));case 1:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function O(t){return S.apply(this,arguments)}function S(){return S=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=385",{params:r}).then(function(c){return{data:(0,A.we)(c.studentList,r),total:c.totalNum,success:!0}}));case 1:case"end":return e.stop()}},t)})),S.apply(this,arguments)}function Q(t){return C.apply(this,arguments)}function C(){return C=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/students",{method:"post",data:r}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}function Z(t){return E.apply(this,arguments)}function E(){return E=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/students/update",{method:"post",data:r}));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function J(t){return j.apply(this,arguments)}function j(){return j=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/students/".concat(r)));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function X(t){return D.apply(this,arguments)}function D(){return D=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/students/".concat(r),{method:"delete"}));case 1:case"end":return e.stop()}},t)})),D.apply(this,arguments)}var re={ended:function(r){return r.type===2&&r.endAt&&v()(r.startAt).isBefore(v()())},notStarted:function(r){return r.type===2&&v()().isBefore(r.startAt)},ongoing:function(r){return r.type===2&&!r.endAt&&v()(r.startAt).isBefore(v()())},video:function(r){return r.type===1}},Y=function(r,i){return r.find(function(e){return re[e](i)})};function K(t){return M.apply(this,arguments)}function M(){return M=d()(n()().mark(function t(r){var i,e,c;return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return i=r.classroomStatus,e=i===void 0?[]:i,c=_()(r,z),L.abrupt("return",(0,m.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=385&sort=startAt,desc&hasHomework=1",{params:c}).then(function(ae){var ue=ae.filter(function(se){return Y(e,se)});return{data:(0,A.we)(ue,c),success:!0}}));case 2:case"end":return L.stop()}},t)})),M.apply(this,arguments)}function R(t){return P.apply(this,arguments)}function P(){return P=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/course-classes/update",{method:"post",data:r}));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function q(t){return $.apply(this,arguments)}function $(){return $=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/course-classes/delete/".concat(r)));case 1:case"end":return e.stop()}},t)})),$.apply(this,arguments)}function ee(t){return B.apply(this,arguments)}function B(){return B=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/courses",{method:"post",data:I()({teacher:"",clientId:"385",client:{},isDelete:1},r)}));case 1:case"end":return e.stop()}},t)})),B.apply(this,arguments)}function te(t){return W.apply(this,arguments)}function W(){return W=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/courses/update",{method:"post",data:r}));case 1:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function g(){return p.apply(this,arguments)}function p(){return p=d()(n()().mark(function t(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385").then(function(e){return e.totalNum}));case 1:case"end":return i.stop()}},t)})),p.apply(this,arguments)}function f(t){return s.apply(this,arguments)}function s(){return s=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/courses/".concat(r)).then(function(c){var H=c.coverUrl,L=_()(c,y);return I()({coverUrl:[{url:H}]},L)}));case 1:case"end":return e.stop()}},t)})),s.apply(this,arguments)}function u(t){return o.apply(this,arguments)}function o(){return o=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/course-classes/".concat(r)));case 1:case"end":return e.stop()}},t)})),o.apply(this,arguments)}function h(t){return l.apply(this,arguments)}function l(){return l=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/course-classes",{method:"post",data:I()({clientId:"385"},r)}));case 1:case"end":return e.stop()}},t)})),l.apply(this,arguments)}function w(t){return x.apply(this,arguments)}function x(){return x=d()(n()().mark(function t(r){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/seller/api/course-classes/update",{method:"post",data:r}));case 1:case"end":return e.stop()}},t)})),x.apply(this,arguments)}}}]);
