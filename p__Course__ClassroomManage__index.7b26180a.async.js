"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[353],{88787:function(ne,V,u){u.r(V),u.d(V,{default:function(){return N}});var G=u(97983),n=u.n(G),Q=u(40794),w=u.n(Q),H=u(12741),A=u.n(H),q=u(11281),s=u.n(q),P=u(13714),o=u(24969),p=u(29102),h=u(30028),D=u(71577),J=u(94594),z=u(12461),S=u(67294),Y=u(97548),L=u.n(Y),T=u(63154),U=u(81579),W=u(96486),a=u(85893),X=["id","course","handleClose","tableReload"],K=function(b){var g=b.id,I=b.course,E=b.handleClose,y=b.tableReload,C=L()(b,X),i=U.Z.useForm(),c=A()(i,1),B=c[0],M=(0,h.useRequest)(P.se,{manual:!0}),k=M.data,$=k===void 0?{}:k,Z=M.run,O=(0,h.useSearchParams)(),m=A()(O,1),d=m[0];(0,S.useEffect)(function(){(0,W.isUndefined)(g)||Z(g).then(B.setFieldsValue)},[g]);var f=function(){var F=w()(n()().mark(function j(_){return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",((0,W.isUndefined)(g)?(0,P._I)(s()({courseId:d.get("courseId"),roomId:d.get("roomId")},_)):(0,P.$H)(_)).then(function(){y(),E()}));case 1:case"end":return R.stop()}},j)}));return function(_){return F.apply(this,arguments)}}();return(0,a.jsxs)(p.aN,s()(s()({},C),{},{form:B,drawerProps:{maskClosable:!1,onClose:E,destroyOnClose:!0},title:(0,W.isUndefined)(g)?"\u521B\u5EFA\u8BFE\u7A0B":"\u7F16\u8F91\u8BFE\u7A0B",grid:!0,initialValues:{type:2},values:$,onFinish:f,children:[(0,a.jsx)(p.VaQ,{name:"className",label:"\u8BFE\u5802\u540D\u79F0",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:T.n0}),(0,a.jsx)(p._IT,{name:"type",label:"\u8BFE\u5802\u7C7B\u578B",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:T.n0,request:w()(n()().mark(function F(){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",[{label:"\u4E92\u52A8\u76F4\u64AD\u8BFE",value:2},{label:"\u89C6\u5C4F\u4E0A\u4F20\u8BFE",value:1}]);case 1:case"end":return _.stop()}},F)}))}),(0,a.jsx)(p.VaQ,{name:"location",label:"\u4E0A\u8BFE\u5730\u70B9",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:T.n0}),(0,a.jsx)(p.Gal,{name:"startAt",label:"\u5F00\u8BFE\u65F6\u95F4",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:T.n0,fieldProps:{style:{width:"100%"}}}),(0,a.jsx)(p.$JJ,{name:"remark",label:"\u5907\u6CE8",colProps:{md:24,xl:24},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:T.n0}),(0,a.jsx)(U.Z.Item,{name:"id",noStyle:!0})]}))},ee=function(g,I,E){return[{title:"\u8BFE\u5802\u72B6\u6001",dataIndex:"classroomStatus",search:!0,hideInTable:!0,valueType:"select",initialValue:["ended","notStarted","ongoing","video"],fieldProps:{allowClear:!1,mode:"multiple",options:[{label:"\u5DF2\u7ED3\u675F\u7684\u8BFE\u5802",value:"ended"},{label:"\u672A\u5F00\u59CB\u7684\u8BFE\u5802",value:"notStarted"},{label:"\u4E0A\u8BFE\u4E2D\u7684\u8BFE\u5802",value:"ongoing"},{label:"\u4E0A\u4F20\u89C6\u9891\u7684\u8BFE\u5802",value:"video"}]}},{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u8BFE\u5802\u540D\u79F0",dataIndex:"classroomName",width:180,ellipsis:!0,render:function(C,i){return(0,a.jsx)(D.Z,{onClick:function(){return window.open(i.choseUrl)},size:"small",type:"link",children:i.className})}},{title:"\u4E0A\u8BFE\u65F6\u95F4",dataIndex:"startAt",align:"center",valueType:"dateTime",width:140},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endAt",align:"center",valueType:"dateTime",width:140},{title:"\u65F6\u957F",dataIndex:"duration",align:"center"},{title:"\u4E0A\u8BFE\u5730\u70B9",dataIndex:"location"},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u4E0A\u67B6/\u4E0B\u67B6",dataIndex:"status",align:"center",render:function(C,i){return(0,a.jsx)(J.Z,{onChange:function(B){return I(i,B?"1":"0")},defaultChecked:C==="1"})}},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:200,fixed:"right",render:function(C,i){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{onClick:function(){return g({visible:!0,id:i.id})},size:"small",type:"link",children:"\u7F16\u8F91"}),(0,a.jsx)(D.Z,{onClick:function(){return E(i)},size:"small",type:"link",danger:!0,children:"\u5220\u9664"}),(0,a.jsx)(D.Z,{size:"small",type:"link",onClick:function(){return h.history.push("/course/classroom-manage/".concat(i.courseId))},children:"\u5E03\u7F6E\u4F5C\u4E1A"})]})}}].map(function(y){return s()({search:!1,width:120},y)})},N=function(){var b=(0,h.useSearchParams)(),g=A()(b,1),I=g[0],E=(0,S.useState)({visible:!1}),y=A()(E,2),C=y[0],i=y[1],c=(0,S.useRef)(),B=(0,h.useRequest)(P.Rq,{manual:!0}),M=B.run,k=(0,h.useRequest)(P.so,{manual:!0}),$=k.run,Z=function(d,f){M({status:f,id:d.id}).then(function(){z.ZP.success("\u64CD\u4F5C\u6210\u529F"),c.current.reload()})},O=function(d){$(d.id).then(function(){z.ZP.success("\u64CD\u4F5C\u6210\u529F"),c.current.reload()})};return(0,a.jsxs)(p._zJ,{header:{title:"\u8BFE\u5802\u7BA1\u7406",onBack:function(){return h.history.back()}},children:[(0,a.jsxs)(p.A96,{readonly:!0,render:null,submitter:{render:function(){return null}},layout:"horizontal",grid:!0,request:w()(n()().mark(function m(){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",{courseName:I.get("courseName"),classroomNum:I.get("roomId")});case 1:case"end":return f.stop()}},m)})),children:[(0,a.jsx)(p.VaQ,{colProps:{span:6},name:"courseName",label:"\u8BFE\u7A0B\u540D\u79F0"}),(0,a.jsx)(p.VaQ,{colProps:{span:6},name:"classroomNum",label:"\u6559\u5BA4\u53F7"})]}),(0,a.jsx)(p.QVr,{actionRef:c,pagination:!1,rowKey:"id",columns:ee(i,Z,O),request:function(){var m=w()(n()().mark(function d(f){return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,P.qY)(s()(s()({},f),{},{"courseId.equals":I.get("courseId")})));case 1:case"end":return j.stop()}},d)}));return function(d){return m.apply(this,arguments)}}(),scroll:{y:400},toolBarRender:function(){return(0,a.jsx)(D.Z,{onClick:function(){return i({visible:!0})},icon:(0,a.jsx)(o.Z,{}),type:"primary",children:"\u65B0\u589E"})}}),(0,a.jsx)(K,s()({tableReload:function(){return c.current.reload()},handleClose:function(){return i({visible:!1})}},C))]})}},13714:function(ne,V,u){u.d(V,{$H:function(){return re},EP:function(){return ee},Gr:function(){return X},Hf:function(){return k},No:function(){return m},P6:function(){return B},Rq:function(){return y},Zy:function(){return Y},_I:function(){return j},fZ:function(){return T},hS:function(){return W},qY:function(){return I},qm:function(){return Z},se:function(){return f},so:function(){return i},wA:function(){return z}});var G=u(97983),n=u.n(G),Q=u(11281),w=u.n(Q),H=u(97548),A=u.n(H),q=u(40794),s=u.n(q),P=u(63154),o=u(30028),p=u(27484),h=u.n(p),D=["classroomStatus"],J=["coverUrl"];function z(r){return S.apply(this,arguments)}function S(){return S=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385",{params:w()(w()({},t),{},{isDelete:1})}).then(function(v){return{data:(0,P.we)(v.courseList,t),total:v.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function Y(r){return L.apply(this,arguments)}function L(){return L=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=385",{params:t}).then(function(v){return{data:(0,P.we)(v.studentList,t),total:v.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function T(r){return U.apply(this,arguments)}function U(){return U=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function W(r){return a.apply(this,arguments)}function a(){return a=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),a.apply(this,arguments)}function X(r){return K.apply(this,arguments)}function K(){return K=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/".concat(t)));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}function ee(r){return N.apply(this,arguments)}function N(){return N=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}},r)})),N.apply(this,arguments)}var b={ended:function(t){return t.type===2&&t.endAt&&h()(t.startAt).isBefore(h()())},notStarted:function(t){return t.type===2&&h()().isBefore(t.startAt)},ongoing:function(t){return t.type===2&&!t.endAt&&h()(t.startAt).isBefore(h()())},video:function(t){return t.type===1}},g=function(t,l){return t.find(function(e){return b[e](l)})};function I(r){return E.apply(this,arguments)}function E(){return E=s()(n()().mark(function r(t){var l,e,v;return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return l=t.classroomStatus,e=l===void 0?[]:l,v=A()(t,D),x.abrupt("return",(0,o.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=385&sort=startAt,desc&hasHomework=1",{params:v}).then(function(ue){var ae=ue.filter(function(se){return g(e,se)});return{data:(0,P.we)(ae,v),success:!0}}));case 2:case"end":return x.stop()}},r)})),E.apply(this,arguments)}function y(r){return C.apply(this,arguments)}function C(){return C=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function i(r){return c.apply(this,arguments)}function c(){return c=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/delete/".concat(t)));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function B(r){return M.apply(this,arguments)}function M(){return M=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses",{method:"post",data:w()({teacher:"",clientId:"385",client:{},isDelete:1},t)}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function k(r){return $.apply(this,arguments)}function $(){return $=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function Z(){return O.apply(this,arguments)}function O(){return O=s()(n()().mark(function r(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385").then(function(e){return e.totalNum}));case 1:case"end":return l.stop()}},r)})),O.apply(this,arguments)}function m(r){return d.apply(this,arguments)}function d(){return d=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses/".concat(t)).then(function(v){var te=v.coverUrl,x=A()(v,J);return w()({coverUrl:[{url:te}]},x)}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function f(r){return F.apply(this,arguments)}function F(){return F=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/".concat(t)));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function j(r){return _.apply(this,arguments)}function _(){return _=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes",{method:"post",data:w()({clientId:"385"},t)}));case 1:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function re(r){return R.apply(this,arguments)}function R(){return R=s()(n()().mark(function r(t){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}}}]);
