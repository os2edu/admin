"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[949],{85662:function(ne,Z,n){n.r(Z),n.d(Z,{default:function(){return q}});var N=n(12741),u=n.n(N),V=n(11281),m=n.n(V),B=n(13714),d=n(63154),z=n(24969),s=n(29102),j=n(71577),i=n(65360),R=n(67294),F=n(97983),I=n.n(F),H=n(40794),O=n.n(H),x=n(97548),G=n.n(x),P=n(30028),w=n(81579),U=n(15746),A=n(96486),T=n(71167),Q=n.n(T),k=n(84057),l=n(85893),$=["id","handleClose","tableReload"],J=function(g){var h=g.id,E=g.handleClose,b=g.tableReload,v=G()(g,$),c=w.Z.useForm(),p=u()(c,1),C=p[0],S=function(y){(0,d.Wi)(y).then(function(o){C.setFieldsValue({coverUrl:[Object.assign(y,{url:"https://ssl.cdn.maodouketang.com/".concat(o.key)})]})})},X=(0,P.useRequest)(B.qm,{manual:!0}),L=X.run,ee=(0,P.useRequest)(B.No,{manual:!0}),W=ee.run,re=function(){var f=O()(I()().mark(function y(o){var K,D,r;return I()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return K=u()(o.coverUrl,1),D=K[0],r=m()(m()({},o),{},{coverUrl:D.url}),a.abrupt("return",((0,A.isUndefined)(h)?(0,B.P6)(r):(0,B.Hf)(r)).then(function(){b(),E()}));case 3:case"end":return a.stop()}},y)}));return function(o){return f.apply(this,arguments)}}();return(0,R.useEffect)(function(){(0,A.isUndefined)(h)?v.visible&&L().then(function(f){return C.setFieldsValue({courseId:100+ +f+1})}):W(h).then(C.setFieldsValue)},[h,v.visible]),(0,l.jsxs)(s.aN,m()(m()({},v),{},{form:C,drawerProps:{maskClosable:!1,onClose:E,destroyOnClose:!0},width:"60%",title:(0,A.isUndefined)(h)?"\u521B\u5EFA\u8BFE\u7A0B":"\u7F16\u8F91\u8BFE\u7A0B",grid:!0,initialValues:{web_site_name:"all"},onFinish:re,children:[(0,l.jsx)(s.VaQ,{name:"title",label:"\u8BFE\u7A0B\u540D\u79F0",colProps:{md:24,xl:24},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,l.jsx)(s.VaQ,{name:"summary",label:"\u4E00\u53E5\u8BDD\u7B80\u4ECB",colProps:{md:24,xl:24},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,l.jsx)(s._IT,{label:"\u8BFE\u7A0B\u7C7B\u578B",name:"type",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:d.n0,request:O()(I()().mark(function f(){return I()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",[{value:3,label:"\u5C0F\u73ED\u8BFE(15\u4EBA\u4EE5\u4E0B)"},{value:6,label:"\u5927\u73ED\u8BFE(16\u4EBA\u4EE5\u4E0A)"}]);case 1:case"end":return o.stop()}},f)}))}),(0,l.jsx)(s._IT,{label:"\u70ED\u95E8/\u975E\u70ED\u95E8",name:"tag",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u9009\u62E9",rules:d.n0,request:O()(I()().mark(function f(){return I()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",[{value:"hot",label:"\u70ED\u95E8"},{value:"notHot",label:"\u975E\u70ED\u95E8"}]);case 1:case"end":return o.stop()}},f)}))}),(0,l.jsx)(s.k_F,{name:"courseIndex",label:"\u6392\u5E8F",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,l.jsx)(s.k_F,{name:"oldPrice",label:"\u539F\u4EF7",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,l.jsx)(s.k_F,{name:"price",label:"\u73B0\u4EF7",colProps:{md:12,xl:8},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:d.n0}),(0,l.jsx)(s.rCM,{name:"coverUrl",label:"\u8BFE\u7A0B\u56FE\u7247",max:1,required:!0,fieldProps:{name:"file",listType:"picture-card"},rules:d.n0,action:S,extra:"\u5EFA\u8BAE\u56FE\u7247\u6BD4\u4F8B\u4E3A16:9",accept:"image/*"}),(0,l.jsx)(U.Z,{span:24,children:(0,l.jsx)(w.Z.Item,{label:"\u8BFE\u7A0B\u4ECB\u7ECD",name:"introduction",required:!0,rules:[{validator:function(y,o){return(0,A.isEmpty)(o.replace("<p><br></p>",""))?Promise.reject(new Error("\u8BF7\u586B\u5199\u6B64\u9879")):Promise.resolve()}}],children:(0,l.jsx)(Q(),{theme:"snow",style:{height:210}})})}),(0,l.jsx)(w.Z.Item,{name:"courseId",noStyle:!0}),(0,l.jsx)(w.Z.Item,{name:"id",noStyle:!0})]}))},Y=function(h,E){return[{title:"\u5E8F\u53F7",dataIndex:"index",align:"center",width:80},{title:"\u8BFE\u7A0B\u540D\u79F0",dataIndex:"title",width:400,search:!0},{title:"\u6559\u5BA4ID",dataIndex:"roomId",align:"center"},{title:"\u4E3B\u8BB2\u6559\u5E08",dataIndex:"teacher",align:"center"},{title:"\u62A5\u540D\u4EBA\u6570",dataIndex:"applyCount",align:"center"},{title:"\u8BFE\u7A0B\u4EF7\u683C",dataIndex:"price",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:200,fixed:"right",render:function(v,c){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.Z,{size:"small",type:"link",onClick:function(){return d.m8.push({pathname:"/course/member-manage/".concat(c.courseId),search:{uniCourseId:c.id}})},children:"\u6210\u5458\u7BA1\u7406"}),(0,l.jsx)(j.Z,{size:"small",type:"link",onClick:function(){return d.m8.push({pathname:"/course/classroom-manage/".concat(c.courseId),search:{courseName:c.title,roomId:c.roomId,courseId:c.courseId}})},children:"\u8BFE\u5802\u7BA1\u7406"}),(0,l.jsx)(j.Z,{onClick:function(){return h(c)},size:"small",type:"link",children:"\u7F16\u8F91"}),(0,l.jsx)(i.Z,{title:"\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return(0,B.Hf)({id:c.id,isDelete:0}).then(function(){E.current.reload()})},children:(0,l.jsx)(j.Z,{size:"small",type:"link",danger:!0,children:"\u5220\u9664"})})]})}}].map(function(b){return m()({search:!1,width:120},b)})},q=function(){var g=(0,R.useState)({visible:!1}),h=u()(g,2),E=h[0],b=h[1],v=(0,R.useRef)(),c=function(C){b({visible:!0,id:C==null?void 0:C.id})};return(0,l.jsxs)(s._zJ,{children:[(0,l.jsx)(s.QVr,{actionRef:v,pagination:null,rowKey:"id",columns:Y(c,v),request:B.wA,scroll:{y:458},toolBarRender:function(){return(0,l.jsx)(j.Z,{onClick:function(){return c()},icon:(0,l.jsx)(z.Z,{}),type:"primary",children:"\u521B\u5EFA\u8BFE\u7A0B"},"button")}}),(0,l.jsx)(J,m()(m()({},E),{},{tableReload:function(){return v.current.reload()},handleClose:function(){return b({visible:!1})}}))]})}},13714:function(ne,Z,n){n.d(Z,{$H:function(){return K},EP:function(){return l},Gr:function(){return Q},Hf:function(){return C},No:function(){return ee},P6:function(){return c},Rq:function(){return h},Zy:function(){return G},_I:function(){return y},fZ:function(){return w},hS:function(){return A},qY:function(){return q},qm:function(){return X},se:function(){return re},so:function(){return b},wA:function(){return O}});var N=n(97983),u=n.n(N),V=n(11281),m=n.n(V),B=n(97548),d=n.n(B),z=n(40794),s=n.n(z),j=n(63154),i=n(30028),R=n(27484),F=n.n(R),I=["classroomStatus"],H=["coverUrl"];function O(r){return x.apply(this,arguments)}function x(){return x=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385",{params:m()(m()({},t),{},{isDelete:1})}).then(function(_){return{data:(0,j.we)(_.courseList,t),total:_.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function G(r){return P.apply(this,arguments)}function P(){return P=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=385",{params:t}).then(function(_){return{data:(0,j.we)(_.studentList,t),total:_.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function w(r){return U.apply(this,arguments)}function U(){return U=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/students",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function A(r){return T.apply(this,arguments)}function T(){return T=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/students/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function Q(r){return k.apply(this,arguments)}function k(){return k=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/students/".concat(t)));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function l(r){return $.apply(this,arguments)}function $(){return $=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/students/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}var J={ended:function(t){return t.type===2&&t.endAt&&F()(t.startAt).isBefore(F()())},notStarted:function(t){return t.type===2&&F()().isBefore(t.startAt)},ongoing:function(t){return t.type===2&&!t.endAt&&F()(t.startAt).isBefore(F()())},video:function(t){return t.type===1}},Y=function(t,a){return t.find(function(e){return J[e](a)})};function q(r){return g.apply(this,arguments)}function g(){return g=s()(u()().mark(function r(t){var a,e,_;return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return a=t.classroomStatus,e=a===void 0?[]:a,_=d()(t,I),M.abrupt("return",(0,i.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=385&sort=startAt,desc&hasHomework=1",{params:_}).then(function(ue){var ae=ue.filter(function(se){return Y(e,se)});return{data:(0,j.we)(ae,_),success:!0}}));case 2:case"end":return M.stop()}},r)})),g.apply(this,arguments)}function h(r){return E.apply(this,arguments)}function E(){return E=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function b(r){return v.apply(this,arguments)}function v(){return v=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/course-classes/delete/".concat(t)));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function c(r){return p.apply(this,arguments)}function p(){return p=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/courses",{method:"post",data:m()({teacher:"",clientId:"385",client:{},isDelete:1},t)}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function C(r){return S.apply(this,arguments)}function S(){return S=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/courses/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function X(){return L.apply(this,arguments)}function L(){return L=s()(u()().mark(function r(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385").then(function(e){return e.totalNum}));case 1:case"end":return a.stop()}},r)})),L.apply(this,arguments)}function ee(r){return W.apply(this,arguments)}function W(){return W=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/courses/".concat(t)).then(function(_){var te=_.coverUrl,M=d()(_,H);return m()({coverUrl:[{url:te}]},M)}));case 1:case"end":return e.stop()}},r)})),W.apply(this,arguments)}function re(r){return f.apply(this,arguments)}function f(){return f=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/course-classes/".concat(t)));case 1:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function y(r){return o.apply(this,arguments)}function o(){return o=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/course-classes",{method:"post",data:m()({clientId:"385"},t)}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function K(r){return D.apply(this,arguments)}function D(){return D=s()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}}}]);
