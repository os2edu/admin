"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[480],{82226:function(ne,W,n){n.r(W),n.d(W,{default:function(){return O}});var z=n(12741),u=n.n(z),N=n(11281),i=n.n(N),C=n(13714),Z=n(24969),d=n(29102),l=n(30028),M=n(94594),o=n(12461),D=n(71577),b=n(65360),A=n(67294),V=n(97983),K=n.n(V),S=n(40794),H=n.n(S),x=n(97548),Q=n.n(x),P=n(63154),I=n(81579),j=n(96486),s=n(85893),F=["id","handleClose","tableReload"],k=[{value:"1",label:"\u5B66\u751F"},{value:"2",label:"\u6559\u5E08"},{value:"4",label:"\u52A9\u6559"},{value:"5",label:"\u7BA1\u7406\u5458"}],R=[{value:"\u5B66\u524D",label:"\u5B66\u524D"},{value:"1-3\u5E74\u7EA7",label:"1-3\u5E74\u7EA7"},{value:"4\u5E74\u7EA7",label:"4\u5E74\u7EA7"},{value:"5\u5E74\u7EA7",label:"5\u5E74\u7EA7"},{value:"6\u5E74\u7EA7",label:"6\u5E74\u7EA7"},{value:"7\u5E74\u7EA7",label:"7\u5E74\u7EA7"},{value:"8\u5E74\u7EA7",label:"8\u5E74\u7EA7"},{value:"9\u5E74\u7EA7",label:"9\u5E74\u7EA7"},{value:"\u5176\u4ED6",label:"\u5176\u4ED6"}],J=[{value:"\u672A\u8BA2\u9605\u901A\u77E5",label:"\u4E0D\u8BA2\u9605\u901A\u77E5"},{value:"\u5DF2\u8BA2\u9605\u77ED\u4FE1\u901A\u77E5",label:"\u8BA2\u9605\u77ED\u4FE1\u901A\u77E5"},{value:"\u5DF2\u8BA2\u9605\u7535\u8BDD\u901A\u77E5",label:"\u8BA2\u9605\u7535\u8BDD\u901A\u77E5"},{value:"\u5DF2\u8BA2\u9605\u5168\u90E8\u901A\u77E5",label:"\u8BA2\u9605\u5168\u90E8\u901A\u77E5"}],Y=function(y){var c=y.id,h=y.handleClose,v=y.tableReload,_=Q()(y,F),m=(0,l.useParams)(),g=m.courseId,p=(0,l.useSearchParams)(),E=u()(p,1),T=E[0],q=I.Z.useForm(),$=u()(q,1),G=$[0],L=(0,l.useRequest)(C.Gr,{manual:!0}),ee=L.run,U=function(){var re=H()(K()().mark(function B(r){return K()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",((0,j.isUndefined)(c)?C.fZ:C.hS)(i()(i()({},r),{},{verify:r.verify?"1":"0"})).then(function(){o.ZP.success("\u4FDD\u5B58\u6210\u529F"),v(),h()}));case 1:case"end":return a.stop()}},B)}));return function(r){return re.apply(this,arguments)}}();return(0,A.useEffect)(function(){(0,j.isUndefined)(c)||!_.visible||ee(c).then(G.setFieldsValue)},[c,_.visible]),(0,s.jsxs)(d.aN,i()(i()({},_),{},{form:G,drawerProps:{maskClosable:!1,onClose:h,destroyOnClose:!0},title:(0,j.isUndefined)(c)?"\u6DFB\u52A0\u6210\u5458":"\u7F16\u8F91\u6210\u5458",grid:!0,onFinish:U,initialValues:{courseId:g,uniCourseId:T.get("uniCourseId"),clientId:"385"},children:[(0,s.jsx)(d.VaQ,{name:"name",label:"\u6635\u79F0",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:P.n0}),(0,s.jsx)(d.VaQ,{name:"phone",label:"\u624B\u673A\u53F7",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:P.n0}),(0,s.jsx)(d._IT,{name:"status",label:"\u89D2\u8272",colProps:{md:24,xl:12},required:!0,placeholder:"\u8BF7\u8F93\u5165",rules:P.n0,options:k}),(0,s.jsx)(d.$Oj.Group,{name:"gender",label:"\u6027\u522B",colProps:{md:24,xl:12},options:[{label:"\u7537",value:"male"},{label:"\u5973",value:"female"}]}),(0,s.jsx)(d._IT,{label:"\u5E74\u7EA7",name:"age",colProps:{md:24,xl:12},placeholder:"\u8BF7\u9009\u62E9",options:R}),(0,s.jsx)(d.lGk,{name:"verify",label:"\u662F\u5426\u5141\u8BB8\u8FDB\u5165\u8BFE\u5802",checkedChildren:"\u5141\u8BB8",unCheckedChildren:"\u4E0D\u5141\u8BB8",colProps:{md:24,xl:12}}),(0,s.jsx)(d._IT,{label:"\u5907\u6CE8",name:"tag",colProps:{md:24,xl:12},placeholder:"\u8BF7\u9009\u62E9",options:J}),(0,s.jsx)(I.Z.Item,{name:"uniCourseId",noStyle:!0}),(0,s.jsx)(I.Z.Item,{name:"courseId",noStyle:!0}),(0,s.jsx)(I.Z.Item,{name:"clientId",noStyle:!0}),(0,s.jsx)(I.Z.Item,{name:"id",noStyle:!0})]}))},X=function(c,h){return[{title:"\u5E8F\u53F7",dataIndex:"index",width:80,align:"center"},{title:"\u59D3\u540D",dataIndex:"name",search:!0},{title:"\u624B\u673A\u53F7",dataIndex:"phone"},{title:"\u6027\u522B",dataIndex:"gender",align:"center",valueType:"select",fieldProps:{options:[{label:"\u7537",value:"male"},{label:"\u5973",value:"female"}]}},{title:"\u5E74\u7EA7",dataIndex:"age"},{title:"\u89D2\u8272",dataIndex:"status",valueType:"select",fieldProps:{options:k}},{title:"\u8FDB\u5165\u8BFE\u5802",dataIndex:"verify",render:function(_,m){return(0,s.jsx)(M.Z,{checkedChildren:"\u5141\u8BB8",unCheckedChildren:"\u4E0D\u5141\u8BB8",defaultChecked:_==="1",onChange:function(p){(0,C.hS)({id:m.id,verify:p?"1":"0"}).then(function(){h.current.reload(),o.ZP.success("\u64CD\u4F5C\u6210\u529F")})}})}},{title:"\u8BFE\u5802\u94FE\u63A5",dataIndex:"url"},{title:"\u5907\u6CE8",dataIndex:"tag",width:200},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:200,fixed:"right",render:function(_,m){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Z,{onClick:function(){return c({visible:!0,id:m.id})},size:"small",type:"link",children:"\u7F16\u8F91"}),(0,s.jsx)(b.Z,{title:"\u786E\u5B9A\u5220\u9664?",onConfirm:function(){return(0,C.EP)(m.id).then(function(){h.current.reload(),o.ZP.success("\u64CD\u4F5C\u6210\u529F")})},children:(0,s.jsx)(D.Z,{size:"small",type:"link",danger:!0,children:"\u5220\u9664"})})]})}}].map(function(v){return i()({search:!1,width:120},v)})},O=function(){var y=(0,l.useParams)(),c=y.courseId,h=(0,A.useRef)(),v=(0,A.useState)({visible:!1}),_=u()(v,2),m=_[0],g=_[1];return(0,s.jsxs)(d._zJ,{header:{title:"\u6210\u5458\u7BA1\u7406",onBack:function(){return history.back()}},children:[(0,s.jsx)(d.QVr,{actionRef:h,pagination:{pageSize:20},rowKey:"id",columns:X(g,h),request:function(E){return(0,C.Zy)(i()(i()({},E),{},{courseId:c}))},scroll:{y:458},toolBarRender:function(){return(0,s.jsx)(D.Z,{onClick:function(){return g({visible:!0})},icon:(0,s.jsx)(Z.Z,{}),type:"primary",children:"\u65B0\u5EFA"})}}),(0,s.jsx)(Y,i()(i()({},m),{},{tableReload:function(){return h.current.reload()},handleClose:function(){return g({visible:!1})}}))]})}},13714:function(ne,W,n){n.d(W,{$H:function(){return re},EP:function(){return k},Gr:function(){return s},Hf:function(){return g},No:function(){return q},P6:function(){return _},Rq:function(){return y},Zy:function(){return H},_I:function(){return ee},fZ:function(){return Q},hS:function(){return I},qY:function(){return X},qm:function(){return E},se:function(){return G},so:function(){return h},wA:function(){return K}});var z=n(97983),u=n.n(z),N=n(11281),i=n.n(N),C=n(97548),Z=n.n(C),d=n(40794),l=n.n(d),M=n(63154),o=n(30028),D=n(27484),b=n.n(D),A=["classroomStatus"],V=["coverUrl"];function K(r){return S.apply(this,arguments)}function S(){return S=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385",{params:i()(i()({},t),{},{isDelete:1})}).then(function(f){return{data:(0,M.we)(f.courseList,t),total:f.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function H(r){return x.apply(this,arguments)}function x(){return x=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/getAllStudentsByConditionsWithTotal?clientId=385",{params:t}).then(function(f){return{data:(0,M.we)(f.studentList,t),total:f.totalNum,success:!0}}));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function Q(r){return P.apply(this,arguments)}function P(){return P=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function I(r){return j.apply(this,arguments)}function j(){return j=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function s(r){return F.apply(this,arguments)}function F(){return F=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/".concat(t)));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function k(r){return R.apply(this,arguments)}function R(){return R=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/students/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}var J={ended:function(t){return t.type===2&&t.endAt&&b()(t.startAt).isBefore(b()())},notStarted:function(t){return t.type===2&&b()().isBefore(t.startAt)},ongoing:function(t){return t.type===2&&!t.endAt&&b()(t.startAt).isBefore(b()())},video:function(t){return t.type===1}},Y=function(t,a){return t.find(function(e){return J[e](a)})};function X(r){return O.apply(this,arguments)}function O(){return O=l()(u()().mark(function r(t){var a,e,f;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return a=t.classroomStatus,e=a===void 0?[]:a,f=Z()(t,A),w.abrupt("return",(0,o.request)("/seller/api/course-classes?page=0&size=1000&clientId.equals=385&sort=startAt,desc&hasHomework=1",{params:f}).then(function(ue){var ae=ue.filter(function(se){return Y(e,se)});return{data:(0,M.we)(ae,f),success:!0}}));case 2:case"end":return w.stop()}},r)})),O.apply(this,arguments)}function y(r){return c.apply(this,arguments)}function c(){return c=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function h(r){return v.apply(this,arguments)}function v(){return v=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/delete/".concat(t)));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function _(r){return m.apply(this,arguments)}function m(){return m=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses",{method:"post",data:i()({teacher:"",clientId:"385",client:{},isDelete:1},t)}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function g(r){return p.apply(this,arguments)}function p(){return p=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function E(){return T.apply(this,arguments)}function T(){return T=l()(u()().mark(function r(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.request)("/seller/api/coursesget/getAllCoursesByConditionsWithTotal?clientId=385").then(function(e){return e.totalNum}));case 1:case"end":return a.stop()}},r)})),T.apply(this,arguments)}function q(r){return $.apply(this,arguments)}function $(){return $=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/courses/".concat(t)).then(function(f){var te=f.coverUrl,w=Z()(f,V);return i()({coverUrl:[{url:te}]},w)}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function G(r){return L.apply(this,arguments)}function L(){return L=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/".concat(t)));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function ee(r){return U.apply(this,arguments)}function U(){return U=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes",{method:"post",data:i()({clientId:"385"},t)}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function re(r){return B.apply(this,arguments)}function B(){return B=l()(u()().mark(function r(t){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/seller/api/course-classes/update",{method:"post",data:t}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}}}]);
